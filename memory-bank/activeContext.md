# アクティブコンテキスト：日本公立高校入試マッチングシステム

## 現在の作業フォーカス

現在、日本の公立高校入試システムを単願制から併願制に変更し、DAアルゴリズムを用いたマッチングシステムの参考実装を開発しています。このシステムは、Next.js、TypeScript、TailwindCSS、Tursoを使用して構築されています。

### 現在の優先事項

1. **プロジェクト初期設定**
   - プロジェクト構造の確立
   - Tursoデータベースの統合
   - 基本的なUIコンポーネントの設計

2. **データモデルの実装**
   - 学生、高校、応募、選考セッション、試験結果のデータモデル設計
   - データベーススキーマの作成
   - Tursoとの接続設定

3. **DAアルゴリズムの実装**
   - 成績に基づく学生のソート
   - 希望順位に基づくマッチング処理
   - 結果の保存と表示

4. **ユーザーインターフェースの開発**
   - 学生向けインターフェース
   - 高校向けインターフェース
   - 教育委員会向けインターフェース

## 最近の変更

現在、プロジェクトは基本的なバックエンド機能が実装された段階にあり、以下の作業が完了しています：

1. **プロジェクト設定**
   - Next.js、TypeScript、TailwindCSSのセットアップ
   - 基本的なプロジェクト構造の確立

2. **要件定義**
   - 主要機能の特定
   - データモデルの概念設計
   - ユーザーフローの定義

3. **Tursoデータベースセットアップ**
   - Tursoデータベース「jpn-pub-hs-matching-ref-impl」の作成
   - データベースURLとトークンの取得
   - 接続情報の準備

4. **Turso統合**
   - @libsql/clientパッケージのインストール
   - データベース接続の設定
   - 環境変数の構成

5. **データベーススキーマ実装**
   - テーブル作成スクリプトの作成
   - サンプルデータの準備
   - データアクセス層の実装

6. **DAアルゴリズム実装**
   - アルゴリズムのコア機能実装
   - 結果分析機能の実装
   - ランダム成績生成機能の実装

7. **APIルート実装**
   - データベース初期化API
   - 学生関連API（一覧、詳細、登録、更新、削除、応募管理）
   - 高校関連API（一覧、詳細、登録、更新、削除）
   - 教育委員会関連API（選考セッション管理、マッチング実行）

## 次のステップ

以下のタスクが次のステップとして計画されています：

1. **UIコンポーネント開発**
   - 共通コンポーネントの作成
   - ページレイアウトの実装
   - フォームとデータ表示の実装

2. **機能実装**
   - 学生の応募機能
   - 高校の応募状況確認機能
   - 教育委員会の高校管理機能
   - 教育委員会の選考セッション実行機能
   - 結果閲覧機能

3. **テストとデバッグ**
   - ユニットテスト
   - 統合テスト
   - E2Eテスト
   - パフォーマンステスト

## アクティブな決定事項

### アーキテクチャ決定

1. **レイヤードアーキテクチャ**
   - UIレイヤー、APIレイヤー、サービスレイヤー、データレイヤーの分離
   - 関心の分離による保守性の向上

2. **サービスパターン**
   - ビジネスロジックをサービスとして分離
   - 再利用性と保守性の向上

3. **リポジトリパターン**
   - データアクセスをリポジトリパターンで抽象化
   - データソースの変更に対する柔軟性

### 技術選択

1. **Next.js App Router**
   - 最新のNext.js機能を活用
   - サーバーコンポーネントとクライアントコンポーネントの適切な使い分け

2. **Tursoデータベース**
   - 軽量で高速なSQLiteベースのエッジデータベース
   - SQLクエリによるデータ操作

3. **TypeScript**
   - 型安全性の確保
   - 開発効率と保守性の向上

4. **TailwindCSS**
   - ユーティリティファーストのアプローチ
   - 効率的なスタイリングとレスポンシブデザイン

## 現在の課題と考慮事項

1. **DAアルゴリズムの最適化**
   - 大規模データセットでのパフォーマンス
   - エッジケースの処理

2. **ユーザー認証**
   - デモ実装のため、簡易的な認証を検討
   - 実際の本番環境では、より堅牢な認証システムが必要

3. **UI/UX設計**
   - 各ステークホルダー（学生、高校、教育委員会）に適したインターフェース
   - 直感的で使いやすいデザイン

4. **テストデータ**
   - 現実的なテストシナリオの作成
   - 様々なケースをカバーするテストデータの準備

5. **パフォーマンスとスケーラビリティ**
   - デモ実装のため、小〜中規模の利用を想定
   - 実際の本番環境では、より堅牢なインフラストラクチャが必要
